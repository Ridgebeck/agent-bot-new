version: "2.0"
rules:

# --------------------------------------------------
# GREETINGS, CHIT CHAT, BOT CHALLENGE, ETC.

- rule: Handle greeting at the very beginning
  conversation_start: true
  steps:
  - intent: greet
  - action: utter_first_greet

- rule: Handle greetings afterwards
  steps:
  - intent: greet
  - action: utter_greet

- rule: Don't let user abort mission
  steps:
  - intent: goodbye
  - action: utter_stayhere

- rule: Respond to chit chat
  steps:
  - intent: chit_chat
  - action: utter_chit_chat

- rule: Don't admit to being a bot
  steps:
  - intent: bot_challenge
  - action: utter_iamnotabot

- rule: Affirm back by default
  condition:
  - slot_was_set:
    - asked_to_solve: false
  steps:
  - intent: affirm
  - action: utter_affirm

- rule: Ask nicely to affirm after deny by default
  condition:
  - slot_was_set:
    - asked_to_solve: false
  steps:
  - intent: deny
  - action: utter_please

- rule: Return praise
  steps:
  - intent: praise
  - action: utter_return_praise

- rule: Respond to good mood
  steps:
  - intent: mood_great
  - action: utter_good_mood

- rule: Respond to profanity
  steps:
  - intent: profanity
  - action: utter_profanity_response

- rule: Respond to out of scope messages
  steps:
  - intent: out_of_scope
  - action: utter_out_of_scope

- rule: Handle fallback gracefully
  steps:
  - intent: nlu_fallback
  - action: action_default_fallback




# - rule: Respond to time limit
#   steps:
#   - intent: time_limit
#   - action: utter_no_time_limit



# --------------------------------------------------
# VERIFYING SOLUTION GUESSES

- rule: Verify the input if intent is password
  steps:
  - intent: password
  - action: action_verify_guess

- rule: Verify store guess
  steps:
  - intent: store
  - action: action_verify_guess  

- rule: Verify restaurant guess
  steps:
  - intent: restaurant
  - action: action_verify_guess

- rule: Verify pier guess
  steps:
  - intent: pier
  - action: action_verify_guess


# --------------------------------------------------
# ASKING FOR NEXT GOAL, HELP OR HINTS

- rule: Verify the next goal if user asks for it
  steps:
  - intent: whats_the_next_goal
  - action: utter_next_goal
  #- action: action_next_goal

- rule: Offer help when stuck
  steps:
  - intent: unhappy_or_stuck
  - action: utter_offer_help

- rule: Offer customized help when help is requested
  steps:
  - intent: need_help
  - action: action_help_user

- rule: Solve riddle for user when they agree
  condition:
  - slot_was_set:
    - asked_to_solve: true
  steps:
  - action: action_help_user
  - intent: affirm
  - action: action_solve_riddle

- rule: Do not solve riddle for user when they deny
  condition:
  - slot_was_set:
    - asked_to_solve: true
  steps:
  - action: action_help_user
  - intent: deny
  - action: utter_do_not_solve


# --------------------------------------------------
# OLD HELP AND HINTS


# - rule: Help user if he accepts
#   steps:
#   - action: utter_offer_help
#   - intent: affirm
#   - action: action_help_user

# - rule: Do not give help if user is stuck and denies
#   steps:
#   - action: utter_offer_help
#   - intent: deny
#   - action: utter_will_wait  

# - rule: Give hint if user confirms
#   steps:
#   - action: action_help_user
#   - intent: affirm
#   - action: action_offer_hint

# - rule: Don't give hint if user denies
#   steps:
#   - action: action_help_user
#   - intent: deny
#   - action: utter_will_wait




# --------------------------------------------------
# OTHER INTENTS

# should_i_give_answer
# are_you_sure
# strix
# working_on_it
# where_are_you

# to add:
# state to city guess
# country?